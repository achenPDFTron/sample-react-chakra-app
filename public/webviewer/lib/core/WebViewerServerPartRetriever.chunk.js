/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{529:function(wa,sa,n){function pa(){return!1}function na(z,aa,ha){if(!(aa in w))return!0;aa=w[aa];for(var ba=0;ba<aa.length;ba++){var ca=z;var ea=aa[ba];var ma=ha;if(ea.name in ca){var la="",ka=!1;ca=ca[ea.name];switch(ea.type){case "s":la="String";ka=Object(ia.isString)(ca);break;case "a":la="Array";ka=Object(ia.isArray)(ca);break;case "n":la="Number";ka=Object(ia.isNumber)(ca)&&Object(ia.isFinite)(ca);break;case "o":la="Object",
ka=Object(ia.isObject)(ca)&&!Object(ia.isArray)(ca)}ka||ma.reject('Expected response field "'+ea.name+'" to have type '+la);ea=ka}else ma.reject('Response missing field "'+ea.name+'"'),ea=!1;if(!ea)return!1}return!0}function oa(z){for(var aa=0,ha=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];aa<ha.length;aa++){var ba=ha[aa],ca=ba;ba=ba.charAt(0).toUpperCase()+ba.slice(1);z[ca]&&(Object.defineProperty(z,ba,Object.getOwnPropertyDescriptor(z,
ca)),delete z[ca])}return z}n.r(sa);var ja=n(0),ia=n(1);n.n(ia);var fa=n(3);wa=n(51);var y=n(29),x=n(547),e=n(113),f=n(439),a=n(49),b=n(194),h=function(){function z(){this.request=this.result=null;this.state=0;var aa=this;aa.promise=new Promise(function(ha,ba){aa.resolve=function(){if(0===aa.state||4===aa.state)aa.state=1,aa.result=arguments[0],ha.apply(null,arguments)};aa.reject=function(){if(0===aa.state||4===aa.state)aa.state=2,ba.apply(null,arguments)}})}z.prototype.Yv=function(){return 1===(this.state&
1)};z.prototype.Ara=function(){return 2===(this.state&2)};z.prototype.gk=function(){return!this.Ara()&&!this.Yv()};z.prototype.Zqa=function(){return 4===(this.state&4)};z.prototype.AS=function(){this.state|=4};return z}(),r=function(){function z(){this.Hv={};this.ec=[]}z.prototype.pop=function(){var aa=this.ec.pop();this.Hv[aa.key]=void 0;return aa};z.prototype.push=function(aa,ha){ha={key:aa,data:ha};this.ec.push(ha);this.Hv[aa]=ha.data};z.prototype.contains=function(aa){return!!this.Hv[aa]};z.prototype.get=
function(aa){return this.Hv[aa]};z.prototype.set=function(aa,ha){var ba=this;this.Hv[aa]=ha;this.ec.forEach(function(ca,ea){ca.key===aa&&(ba.ec[ea]=ca)})};z.prototype.remove=function(aa){var ha=this;this.Hv[aa]=void 0;this.ec.forEach(function(ba,ca){ba.key===aa&&ha.ec.splice(ca,1)})};z.prototype.length=function(){return this.ec.length};return z}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},
{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};n=function(){function z(aa,ha,ba){var ca=this;this.gT=this.$Z=!1;this.oi=this.$J=this.sx=this.qf=this.My=this.zq=this.Ly=this.To=null;this.vo=
new h;this.Or=new h;this.sF=!1;this.zg=this.uf=this.vf=this.og=null;this.Vg=[];this.fG=[];this.cache={};this.timeStamp=0;this.ii=[];this.qk=[];this.XN=null;this.NZ=!1;this.p7=this.id=null;this.wQ=this.e2=pa;this.jj=0;this.vP=!1;this.j4=1;this.mk={};this.zu=0;this.Bw=new r;ha.endsWith("/")||(ha+="/");ba=ba||{};this.$Z=ba.disableWebsockets||!1;this.gT=ba.singleServerMode||!1;null!=ba.customQueryParameters&&Object(a.b)("wvsQueryParameters",ba.customQueryParameters);ha.endsWith("blackbox/")||(ha+="blackbox/");
this.To=ba.uploadData||null;this.sx=ba.uriData||null;this.Ly=ba.cacheKey||null;if(this.zq=ba.officeOptions||null)this.zq=oa(this.zq);this.qf=ba.rasterizerOptions||null;this.My=ba.cadOptions||null;this.Qf=ha;this.vN=aa;this.Kq(!0);this.Ru=(new x.a(ha,null,this.Vi())).qma(!this.$Z,function(ea){ca.sta(ea)},function(){return null},function(){ca.sF=!1},function(){ca.Swa()})}z.prototype.Dia=function(){var aa=this;return new Promise(function(ha,ba){var ca=new XMLHttpRequest;ca.open("GET",aa.Qf+"ck");ca.withCredentials=
aa.Vi();ca.onreadystatechange=function(){ca.readyState===XMLHttpRequest.DONE&&(200===ca.status?ha():ba())};ca.send()})};z.prototype.Iya=function(aa){this.e2=aa||pa;this.wQ=pa};z.prototype.aha=function(){this.M6();return this.Ru.bs(!0)};z.prototype.M6=function(){Object(ja.b)(this,void 0,void 0,function(){return Object(ja.d)(this,function(aa){switch(aa.label){case 0:return this.Or=new h,this.vo=new h,this.sF=!1,this.id=null,this.NZ=!1,[4,this.Dia()];case 1:return aa.ba(),[2]}})})};z.prototype.Swa=function(){this.e2();
this.M6();this.og&&(this.og.gk()?this.ui(this.og.request):this.og.Yv()&&this.wQ(this.og.result.url,"pdf")&&(this.og=null,this.K6()));this.zg&&this.zg.gk()&&this.ui(this.zg.request);this.vf&&this.vf.gk()?this.ui(this.vf.request):this.uf&&this.uf.gk()&&this.N1();var aa;for(aa=0;aa<this.ii.length;aa++)this.ii[aa]&&(this.ii[aa].gk()?this.ui(this.ii[aa].request):this.ii[aa].Yv()&&this.wQ(this.ii[aa].result.url,"image")&&(this.ii[aa]=null,this.QI(Object(ia.uniqueId)(),aa)));for(aa=0;aa<this.qk.length;aa++)this.qk[aa]&&
this.qk[aa].gk()&&!this.qk[aa].Zqa()&&this.ui(this.qk[aa].request);for(aa=0;aa<this.Vg.length;aa++)this.Vg[aa]&&this.Vg[aa].gk()&&this.ui(this.Vg[aa].request)};z.prototype.yqa=function(){return this.sF?Promise.resolve():(this.sF=!0,this.timeStamp=Date.now(),this.Ru.kH())};z.prototype.HBa=function(){var aa=this,ha,ba,ca,ea,ma;return new Promise(function(la,ka){if(aa.To)ha=new FormData,ha.append("file",aa.To.fileHandle,aa.To.fileHandle.name),aa.zq&&ha.append("officeOptions",JSON.stringify(aa.zq)),aa.qf&&
ha.append("rasterizerOptions",JSON.stringify(aa.qf)),aa.My&&ha.append("cadOptions",aa.My.getJsonString()),aa.Ly&&ha.append("cacheKey",aa.Ly),ba=aa.To.loadCallback,ea="upload",ca=aa.To.extension;else if(aa.sx)ha={uri:aa.sx.uri,cGa:aa.sx.shareId},ha=Object.keys(ha).map(function(ta){return ta+"="+(ha[ta]?encodeURIComponent(ha[ta]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",ba=aa.sx.loadCallback,ea="url",ca=aa.sx.extension;else{la();return}var ra=new XMLHttpRequest,qa=Object(y.k)(aa.Qf,
"AuxUpload");qa=Object(b.a)(qa,{type:ea,ext:ca});ra.open("POST",qa);ra.withCredentials=aa.Vi();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var ta=JSON.parse(ra.response);aa.vN=ta.uri;ba(ta);la(ta)}});ra.addEventListener("error",function(){ka(ra.statusText+" "+JSON.stringify(ra))});aa.To&&null!=aa.To.onProgress&&(ra.upload.onprogress=function(ta){aa.To.onProgress(ta)});ra.send(ha)})};z.prototype.Gwa=function(aa){this.password=
aa||null;this.vo.Yv()||(this.vo=new h,this.ui({t:"pages"}));return this.vo.promise};z.prototype.NB=function(aa){this.XN=aa||null;this.vo.Yv()||this.ui({t:"pages"});return this.vo.promise};z.prototype.Xy=function(aa){aa=Object.assign(aa,{uri:encodeURIComponent(this.vN)});this.XN&&(aa.ext=this.XN);this.oi&&(aa.c=this.oi);this.password&&(aa.pswd=this.password);this.Ly&&(aa.cacheKey=this.Ly);this.zq&&(aa.officeOptions=this.zq);this.qf&&(aa.rastOptions=this.qf);this.My&&(aa.cadOptions=this.My.mImpl);return aa};
z.prototype.uxa=function(){0<this.Bw.length()&&10>=this.zu&&this.vxa(this.Bw.pop().data)};z.prototype.nga=function(aa){0<this.Bw.length()&&this.Bw.contains(aa)&&this.Bw.remove(aa)};z.prototype.ui=function(aa){aa=this.Xy(aa);this.Ru.send(aa)};z.prototype.k7=function(aa,ha){10<this.zu?this.Bw.push(aa,ha):(this.zu++,aa=this.Xy(ha),this.Ru.send(aa))};z.prototype.vxa=function(aa){this.zu++;aa=this.Xy(aa);this.Ru.send(aa)};z.prototype.yn=function(aa){return aa};z.prototype.d2=function(aa){this.gT&&aa?Object(fa.j)("Server failed health check. Single server mode ignoring check."):
!this.iEa&&aa&&3>=this.jj?(this.vP=!0,this.Ru.bs()):3<this.jj&&(this.gT=!0)};z.prototype.sta=function(aa){var ha=this,ba=aa.data,ca=aa.err,ea=aa.t;switch(ea){case "upload":ca?this.IBa.reject(ca):this.IBa.resolve("Success");break;case "pages":ca?this.vo.reject(ca):na(ba,ea,this.vo)&&this.vo.resolve(ba);break;case "config":if(ca)this.Or.reject(ca);else if(na(ba,ea,this.Or)){this.d2(ba.unhealthy);ba.id&&(this.id=ba.id);if(ba.auth){var ma=Object(a.a)("wvsQueryParameters");ma.auth=ba.auth;Object(a.b)("wvsQueryParameters",
ma)}ba.serverVersion&&(this.$J=ba.serverVersion,Object(fa.h)("[WebViewer Server] server version: "+this.$J));ba.serverID?(this.jj=ba.serverID===this.p7&&this.vP?this.jj+1:0,this.p7=ba.serverID):this.jj=0;this.vP=!1;this.Or.resolve(ba)}break;case "health":ca?this.Or.reject(ca):na(ba,ea,this.Or)&&this.d2(ba.unhealthy);break;case "pdf":ba.url=Object(b.a)(this.Qf+"../"+encodeURI(ba.url));ca?this.og.reject(ca):na(ba,ea,this.og)&&this.og.resolve(ba);break;case "ApString2Xod":ba.url=Object(b.a)(this.Qf+
"../data/"+encodeURI(ba.url));ca?this.mk[ba.rID].reject(ca):na(ba,ea,this.mk[ba.rID])&&this.mk[ba.rID].resolve(ba);break;case "docmod":ba.url=Object(b.a)(this.Qf+"../"+encodeURI(ba.url));ca?this.mk[ba.rID].reject(ca):na(ba,ea,this.og)&&this.mk[ba.rID].resolve(ba);break;case "xod":if(ca)this.vf&&this.vf.gk()&&this.vf.reject(ca),this.uf&&this.uf.gk()&&this.uf.reject(ca);else if(ba.notFound)ba.noCreate||this.vf&&this.vf.gk()&&this.vf.resolve(ba),this.uf&&this.uf.gk()&&this.uf.resolve(ba);else{ba.url&&
(ba.url=Object(b.a)(this.Qf+"../"+encodeURI(ba.url)));if(!this.uf||this.uf.Yv())this.uf=new h,this.uf.request={t:"xod",noCreate:!0};this.vf||(this.vf=new h,this.vf.request={t:"xod"});this.uf.resolve(ba);this.vf.resolve(ba)}break;case "cAnnots":ma=this.zg;if(ca)ma.reject(ca);else if(na(ba,ea,ma)){ma.AS();var la=[],ka=ba.annots;ba=function(Ja){var Fa=ka[Ja].s,Da=ka[Ja].e,La=ra.Qf+"../"+encodeURI(ka[Ja].xfdf),Ca="true"===ka[Ja].hasAppearance?Object(b.a)(La+".xodapp"):null,Ka=Object(ia.range)(Fa,Da+1);
la[Ja]={range:Ka,promise:new Promise(function(Qa,Ta){var Na=new XMLHttpRequest;Na.open("GET",Object(b.a)(La));Na.responseType="text";Na.withCredentials=ha.Vi();Na.addEventListener("load",function(){Na.readyState===Na.DONE&&200===Na.status&&Qa({Lt:Na.response,kn:Ca,range:Ka})});Na.addEventListener("error",function(){Ta(Na.statusText+" "+JSON.stringify(Na))});Na.send()})}};var ra=this;for(ca=0;ca<ka.length;ca++)ba(ca);ma.resolve(la)}break;case "annots":if(ca)this.zg.reject(ca);else if(na(ba,ea,this.zg)){this.zg.AS();
var qa=new XMLHttpRequest;ma=this.Qf+"../"+encodeURI(ba.url);var ta=ba.hasAppearance?Object(b.a)(ma+".xodapp"):null;qa.open("GET",Object(b.a)(ma));qa.responseType="text";qa.withCredentials=this.Vi();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ha.zg.resolve({Lt:qa.response,kn:ta})});qa.addEventListener("error",function(){ha.zg.reject(qa.statusText+" "+JSON.stringify(qa))});qa.send()}break;case "image":this.zu--;var va=this.ii[ba.p];ca?va.promise.reject(ca):na(ba,
ea,va)&&(va.result=ba,va.result.url=Object(b.a)(this.Qf+"../"+encodeURI(va.result.url)),va.resolve(va.result));break;case "tiles":this.zu--;va=ba.rID;ma=this.Vg[va];this.Vg[va]=null;this.fG.push(va);if(ca)ma.reject(ca);else if(na(ba,ea,ma)){for(ca=0;ca<ba.tiles.length;ca++)ba.tiles[ca]=Object(b.a)(this.Qf+"../"+encodeURI(ba.tiles[ca]));ma.resolve(ba)}break;case "text":va=this.qk[ba.p];if(ca)va.reject(ca);else if(na(ba,ea,va)){va.AS();var ya=new XMLHttpRequest;ba=Object(b.a)(this.Qf+"../"+encodeURI(ba.url));
ya.open("GET",ba);ya.withCredentials=this.Vi();ya.addEventListener("load",function(){ya.readyState===ya.DONE&&200===ya.status&&(va.result=JSON.parse(ya.response),va.resolve(va.result))});ya.addEventListener("error",function(Ja){va.reject(ya.statusText+" "+JSON.stringify(Ja))});ya.send()}break;case "progress":"loading"===ba.t&&this.trigger(e.a.Events.DOCUMENT_LOADING_PROGRESS,[ba.bytes,ba.total])}this.uxa();!ea&&aa.echo&&aa&&"apstring2xod"===aa.echo.t&&(aa=aa.echo.reqID)&&(2<=parseInt(this.$J,10)?
this.mk[aa].reject("Message unhandled by server"):this.mk[aa].reject())};z.prototype.gna=function(){return Object(ja.b)(this,void 0,void 0,function(){return Object(ja.d)(this,function(aa){switch(aa.label){case 0:return[4,this.yqa()];case 1:return aa.ba(),[2,this.Or.promise]}})})};z.prototype.Nma=function(aa){for(var ha=this,ba=new XMLHttpRequest,ca=Object(b.a)(this.Qf+"aul",{id:this.id}),ea=new FormData,ma={},la=0;la<aa.body.length;la++){var ka=aa.body[la];ma[ka.id]=ka.iM.w+";"+ka.iM.h;ea.append(ka.id,
ka.iM.dataString)}aa={t:"apstring2xod",reqID:this.j4++,parts:ma};var ra=this.Xy(aa);ea.append("msg",JSON.stringify(ra));this.mk[ra.reqID]=new h;ba.open("POST",ca);ba.withCredentials=this.Vi;ca=new Promise(function(qa,ta){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?qa():ta("An error occurred while sending down appearance strings to the server"))}});ba.send(ea);return ca.then(function(){return ha.mk[ra.reqID].promise})};z.prototype.dha=function(){var aa=this.$J.split("-")[0].split("."),
ha=["1","5","9"];if(3!==aa.length)throw Error("Invalid WVS version length.");if(3!==ha.length)throw Error("Invalid version length.");for(var ba=0;ba<aa.length;++ba){if(ha.length===ba||aa[ba]>ha[ba])return-1;if(aa[ba]!==ha[ba])return 1}return 0};z.prototype.Jr=function(){return 0>=this.dha()};z.prototype.jO=function(){this.zg||(this.zg=new h,this.Jr()?this.zg.request={t:"cAnnots"}:this.zg.request={t:"annots"},this.ui(this.zg.request));return this.zg.promise};z.prototype.QI=function(aa,ha){this.ii[ha]||
(this.ii[ha]=new h,this.ii[ha].request={t:"image",p:ha},this.k7(aa,this.ii[ha].request));return this.ii[ha].promise};z.prototype.Hwa=function(aa){this.qk[aa]||(this.qk[aa]=new h,this.qk[aa].request={t:"text",p:aa},this.ui(this.qk[aa].request));return this.qk[aa].promise};z.prototype.Iwa=function(aa,ha,ba,ca,ea){var ma=this.Vg.length;this.fG.length&&(ma=this.fG.pop());this.Vg[ma]=new h;this.Vg[ma].request={t:"tiles",p:ha,z:ba,r:ca,size:ea,rID:ma};this.k7(aa,this.Vg[ma].request);return this.Vg[ma].promise};
z.prototype.K6=function(){this.og||(this.og=new h,this.og.request={t:"pdf"},this.NZ?this.og.resolve({url:this.vN}):this.ui(this.og.request));return this.og.promise};z.prototype.T0=function(aa){var ha=this,ba=new XMLHttpRequest,ca=Object(b.a)(this.Qf+"aul",{id:this.id}),ea=new FormData,ma={};aa.annots&&(ma.annots="xfdf");aa.watermark&&(ma.watermark="png");aa.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.j4++,parts:ma};aa.print&&(ma.print=!0);var la=this.Xy(ma);ea.append("msg",JSON.stringify(la));
return Promise.all([aa.annots,aa.watermark,aa.redactions].map(function(ka){return Promise.resolve(ka)})).then(function(ka){var ra=ka[0],qa=ka[1];ka=ka[2];ra&&ea.append("annots",ra);qa&&ea.append("watermark",qa);ka&&ea.append("redactions",ka);ha.mk[la.reqID]=new h;ba.open("POST",ca);ba.withCredentials=ha.Vi;ra=new Promise(function(ta,va){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?ta():va("An error occurred while sending down annotation data to the server"))}});ba.send(ea);
return ra.then(function(){return ha.mk[la.reqID].promise})})};z.prototype.N1=function(){this.uf||(this.uf=new h,this.uf.request={t:"xod",noCreate:!0},this.ui(this.uf.request));return this.uf.promise};z.prototype.Jwa=function(){this.vf||(this.vf=new h,this.vf.request={t:"xod"},this.ui(this.vf.request));return this.vf.promise};z.prototype.Fq=function(){return!0};z.prototype.request=function(){};z.prototype.Y5=function(){};z.prototype.abort=function(){for(var aa=0;aa<this.Vg.length;aa++)this.Vg[aa]&&
(this.Vg[aa].resolve(null),this.Vg[aa]=null,this.fG.push(aa));this.close()};z.prototype.dJ=function(aa){this.oi=this.oi||{};this.oi.headers=aa};z.prototype.Kq=function(aa){this.oi=this.oi||{};this.oi.internal=this.oi.internal||{};this.oi.internal.withCredentials=aa};z.prototype.Vi=function(){return this.oi&&this.oi.internal?this.oi.internal.withCredentials:null};z.prototype.getFileData=function(){return Promise.reject()};return z}();Object(wa.a)(n);Object(f.a)(n);Object(f.b)(n);sa["default"]=n},547:function(wa,
sa,n){var pa=n(0),na=n(3),oa=n(29),ja=n(49),ia=n(194),fa=n(85),y=function(){function e(f,a,b,h,r,w){void 0===b&&(b=null);void 0===h&&(h=null);void 0===r&&(r=null);void 0===w&&(w=null);this.M3=!1;this.jj=0;this.FY=this.cCa(f);this.url=a?this.FY+"/"+a:this.FY+"/ws";this.iN=b;this.iB=h;this.Vy=r;this.XR=w}e.prototype.cCa=function(f){var a=f.indexOf("://"),b="ws://";0>a?a=0:(5===a&&(b="wss://"),a+=3);var h=f.lastIndexOf("/");0>h&&(h=f.length);return b+f.slice(a,h)};e.prototype.send=function(f){this.Vq.readyState===
WebSocket.CLOSED||this.M3||this.Vq.send(JSON.stringify(f))};e.prototype.kH=function(){return Object(pa.b)(this,void 0,void 0,function(){var f,a=this;return Object(pa.d)(this,function(){f=Object(ja.a)("wvsQueryParameters");f.bcid=Object(oa.l)(8);Object(ja.b)("wvsQueryParameters",f);return[2,new Promise(function(b,h){var r=Object(ia.a)(a.url);a.Vq=new WebSocket(r);a.Vq.onopen=function(){a.iB&&a.iB();b()};a.Vq.onerror=function(w){a.M3=!0;h(w)};a.Vq.onclose=function(w){var z=w.code;return Object(pa.b)(a,
void 0,void 0,function(){var aa=this;return Object(pa.d)(this,function(ha){switch(ha.label){case 0:return this.Vy&&this.Vy(),3E3===z?[3,3]:8>this.jj++?[4,new Promise(function(ba){return setTimeout(function(){return Object(pa.b)(aa,void 0,void 0,function(){return Object(pa.d)(this,function(ca){switch(ca.label){case 0:return this.XR(),[4,this.kH()];case 1:return ca.ba(),ba(),[2]}})})},3E3)})]:[3,2];case 1:return ha.ba(),[3,3];case 2:h(fa.a),ha.label=3;case 3:return[2]}})})};a.Vq.onmessage=function(w){w&&
w.data&&(w=JSON.parse(w.data),w.hb?a.send({hb:!0}):w.end?close():a.iN(w))}})]})})};e.prototype.bs=function(f){void 0===f&&(f=!1);this.jj=0;f?this.Vq.close(3E3):this.Vq.close();return Promise.resolve()};return e}(),x=function(){function e(f,a,b,h,r,w,z){void 0===h&&(h=null);void 0===r&&(r=null);void 0===w&&(w=null);void 0===z&&(z=null);this.jj=this.OI=this.id=0;this.qA=!1;this.request=null;f=this.Wua(f);this.url=a?f+"/"+a+"pf":f+"/pf";this.TJ=b;this.iN=h;this.iB=r;this.Vy=w;this.XR=z}e.prototype.Wua=
function(f){var a=f.lastIndexOf("/");0>a&&(a=f.length);return f.slice(0,a)};e.prototype.gia=function(f){f=f.split("\n");for(f[f.length-1]&&f.pop();0<f.length&&3>f[f.length-1].length;)"]"===f.pop()&&(this.id=0);0<f.length&&3>f[0].length&&f.shift();for(var a=0;a<f.length;++a)f[a].endsWith(",")&&(f[a]=f[a].substr(0,f[a].length-1));return f};e.prototype.W6=function(){return Object(pa.b)(this,void 0,void 0,function(){var f=this;return Object(pa.d)(this,function(a){switch(a.label){case 0:return 8>this.jj++?
[4,new Promise(function(b){return setTimeout(function(){f.XR();f.kH();b()},3E3)})]:[3,2];case 1:a.ba(),a.label=2;case 2:return[2]}})})};e.prototype.Yua=function(f){Object(pa.b)(this,void 0,void 0,function(){var a,b;return Object(pa.d)(this,function(h){switch(h.label){case 0:a=null,b=0,h.label=1;case 1:if(!(b<f.length))return[3,6];a=JSON.parse(f[b]);if(!a)return[3,5];if(!a.end)return[3,2];close();return[3,5];case 2:if(!a.id||Number(a.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");
this.bs();return[4,this.W6()];case 3:return h.ba(),[3,5];case 4:a.hb&&Number(a.id)===this.id?this.send({hb:!0}):this.qA||this.iN(a),h.label=5;case 5:return++b,[3,1];case 6:return[2]}})})};e.prototype.pta=function(f){Object(pa.b)(this,void 0,void 0,function(){var a,b,h;return Object(pa.d)(this,function(r){switch(r.label){case 0:if(!(3<=f.readyState))return[3,2];try{a=f.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<a)try{b=this.gia(f.responseText),0===this.id&&0<b.length&&
(h=JSON.parse(b.shift()),this.id=h.id,this.jj=0),this.Yua(b)}catch(w){}return this.qA?[3,2]:[4,this.I_()];case 1:r.ba(),r.label=2;case 2:return[2]}})})};e.prototype.I_=function(){return Object(pa.b)(this,void 0,void 0,function(){var f=this;return Object(pa.d)(this,function(){return[2,new Promise(function(a,b){function h(){return Object(pa.b)(f,void 0,void 0,function(){return Object(pa.d)(this,function(w){switch(w.label){case 0:b(),this.bs(),w.label=1;case 1:return this.qA&&8>this.jj?[4,this.W6()]:
[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}f.request=new XMLHttpRequest;f.request.withCredentials=f.TJ;var r=Object(ia.a)(f.url,0!==f.id?{id:String(f.id),uc:String(f.OI)}:{uc:String(f.OI)});f.OI++;f.request.open("GET",r,!0);f.request.setRequestHeader("Cache-Control","no-cache");f.request.setRequestHeader("X-Requested-With","XMLHttpRequest");f.request.onreadystatechange=function(){f.pta(f.request)};f.request.addEventListener("error",h);f.request.addEventListener("timeout",h);f.request.addEventListener("load",
function(){f.iB&&f.iB();a()});f.request.send()})]})})};e.prototype.kH=function(){var f=Object(ja.a)("wvsQueryParameters");f.bcid=Object(oa.l)(8);Object(ja.b)("wvsQueryParameters",f);this.OI=this.id=0;this.qA=!1;return this.I_()};e.prototype.send=function(f){var a=this,b=new XMLHttpRequest;b.withCredentials=this.TJ;var h=Object(ia.a)(this.url,{id:String(this.id)}),r=new FormData;r.append("data",JSON.stringify(f));b.addEventListener("error",function(){a.bs()});b.open("POST",h);b.setRequestHeader("X-Requested-With",
"XMLHttpRequest");b.send(r)};e.prototype.bs=function(){this.id=0;this.qA=!0;this.Vy&&this.Vy();this.request.abort();return Promise.resolve()};return e}();wa=function(){function e(f,a,b){this.mZ=f;this.target=a;this.TJ=b}e.prototype.qma=function(f,a,b,h,r){void 0===f&&(f=!0);void 0===a&&(a=null);void 0===b&&(b=null);void 0===h&&(h=null);void 0===r&&(r=null);return f?new y(this.mZ,this.target,a,b,h,r):new x(this.mZ,this.target,this.TJ,a,b,h,r)};return e}();sa.a=wa}}]);}).call(this || window)
