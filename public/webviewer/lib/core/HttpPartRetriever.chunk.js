/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{518:function(wa,sa,n){n.r(sa);n.d(sa,"ByteRangeRequest",function(){return w});var pa=n(0),na=n(1);n.n(na);var oa=n(3),ja=n(176);wa=n(113);var ia=n(293),fa=n(87),y=n(83),x=n(292),e=n(194);n=n(439);var f=[],a=[],b=window,h=function(){return function(){this.Bo=1}}(),r;(function(aa){aa[aa.UNSENT=0]="UNSENT";aa[aa.DONE=4]="DONE"})(r||(r={}));var w=function(){function aa(ha,ba,ca,ea){var ma=this;this.url=ha;this.range=ba;this.dg=ca;
this.withCredentials=ea;this.cca=r;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);b.Uint8Array&&(this.request.responseType="arraybuffer");ea&&(this.request.withCredentials=ea);z.DISABLE_RANGE_HEADER||(Object(na.isUndefined)(ba.stop)?this.request.setRequestHeader("Range","bytes="+ba.start):this.request.setRequestHeader("Range",["bytes=",ba.start,"-",ba.stop-1].join("")));ca&&Object.keys(ca).forEach(function(la){ma.request.setRequestHeader(la,ca[la])});this.request.overrideMimeType?
this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=x.a.NOT_STARTED}aa.prototype.start=function(ha){var ba=this,ca=this.request;ca.onreadystatechange=function(){if(ba.aborted)return ba.status=x.a.ABORTED,ha({code:x.a.ABORTED});if(this.readyState===ba.cca.DONE){ba.HG();var ea=0===window.document.URL.indexOf("file:///");200===ca.status||206===ca.status||ea&&0===ca.status?(ea=b.i1(this),ba.oT(ea,ha)):(ba.status=
x.a.ERROR,ha({code:ba.status,status:ba.status}))}};this.request.send(null);this.status=x.a.STARTED};aa.prototype.oT=function(ha,ba){this.status=x.a.SUCCESS;if(ba)return ba(!1,ha)};aa.prototype.abort=function(){this.HG();this.aborted=!0;this.request.abort()};aa.prototype.HG=function(){var ha=Object(e.c)(this.url,this.range,a);-1!==ha&&a.splice(ha,1);if(0<f.length){ha=f.shift();var ba=new aa(ha.url,ha.range,this.dg,this.withCredentials);ha.request=ba;a.push(ha);ba.start(Object(e.d)(ha))}};aa.prototype.extend=
function(ha){var ba=Object.assign({},this,ha.prototype);ba.constructor=ha;return ba};return aa}(),z=function(aa){function ha(ba,ca,ea,ma,la){ea=aa.call(this,ba,ea,ma)||this;ea.wk={};ea.aF=ca;ea.url=ba;ea.DISABLE_RANGE_HEADER=!1;ea.FB=w;ea.HU=3;ea.dg=la||{};return ea}Object(pa.c)(ha,aa);ha.prototype.$y=function(ba,ca,ea){var ma=-1===ba.indexOf("?")?"?":"&";switch(ea){case !1:case y.a.NEVER_CACHE:ba=ba+ma+"_="+Object(na.uniqueId)();break;case !0:case y.a.CACHE:ba=ba+ma+"_="+ca.start+","+(Object(na.isUndefined)(ca.stop)?
"":ca.stop)}return ba};ha.prototype.AZ=function(ba,ca,ea,ma){void 0===ea&&(ea={});return new this.FB(ba,ca,ea,ma)};ha.prototype.sla=function(ba,ca,ea,ma,la){for(var ka=0;ka<f.length;ka++)if(Object(na.isEqual)(f[ka].range,ca)&&Object(na.isEqual)(f[ka].url,ba))return f[ka].Ph.push(ma),f[ka].VH++,null;for(ka=0;ka<a.length;ka++)if(Object(na.isEqual)(a[ka].range,ca)&&Object(na.isEqual)(a[ka].url,ba))return a[ka].Ph.push(ma),a[ka].VH++,null;ea={url:ba,range:ca,aF:ea,Ph:[ma],VH:1};if(0===f.length&&a.length<
this.HU)return a.push(ea),ea.request=this.AZ(ba,ca,la,this.withCredentials),ea;f.push(ea);return null};ha.prototype.vq=function(ba,ca,ea){var ma=this.$y(ba,ca,this.aF);(ba=this.sla(ma,ca,this.aF,ea,this.dg))&&ba.request.start(Object(e.d)(ba));return function(){var la=Object(e.c)(ma,ca,a);if(-1!==la){var ka=--a[la].VH;0===ka&&a[la].request&&a[la].request.abort()}else la=Object(e.c)(ma,ca,f),-1!==la&&(ka=--f[la].VH,0===ka&&f.splice(la,1))}};ha.prototype.G0=function(){return{start:-ja.a}};ha.prototype.Ppa=
function(){var ba=-(ja.a+ja.e);return{start:ba-ja.d,end:ba}};ha.prototype.ew=function(ba){var ca=this;this.hF=!0;var ea=ja.a;this.vq(this.url,this.G0(),function(ma,la,ka){function ra(){var qa=ca.ie.D0();ca.vq(ca.url,qa,function(ta,va){if(ta)return Object(oa.j)("Error loading central directory: "+ta),ba(ta);va=Object(fa.a)(va);if(va.length!==qa.stop-qa.start)return ba("Invalid XOD file: Zip central directory data is wrong size! Should be "+(qa.stop-qa.start)+" but is "+va.length);ca.ie.P5(va);ca.LM=
!0;ca.hF=!1;return ba(!1)})}if(ma)return Object(oa.j)("Error loading end header: "+ma),ba(ma,la,ka);la=Object(fa.a)(la);if(la.length!==ea)return ba("Invalid XOD file: Zip end header data is wrong size!");try{ca.ie=new ia.a(la)}catch(qa){return ba(qa)}ca.ie.Nra?ca.vq(ca.url,ca.Ppa(),function(qa,ta){if(qa)return Object(oa.j)("Error loading zip64 header: "+qa),ba(qa);ta=Object(fa.a)(ta);ca.ie.msa(ta);ra()}):ra()})};ha.prototype.d1=function(ba){ba(Object.keys(this.ie.Vp))};ha.prototype.DR=function(ba,
ca){var ea=this;if(this.ie.pZ(ba)){var ma=this.ie.Pz(ba);if(ma in this.wk){var la=this.pi[ba];la.Nu=this.wk[ma];la.Nu.Bo++;la.cancel=la.Nu.cancel}else{var ka=this.ie.Rna(ba),ra=this.vq(this.url,ka,function(ta,va){ta?(Object(oa.j)('Error loading part "'+ba+'": '+ta),ea.vq(ea.url,ka,function(ya,Ja){if(ya)return ca(ya,ba);ea.T5(Ja,ka,ma,ba,ca)})):ea.T5(va,ka,ma,ba,ca)}),qa=this.pi[ba];qa&&(qa.C8=!0,qa.cancel=function(){qa.Nu.Bo--;0===qa.Nu.Bo&&(ra(),delete ea.wk[ma])},this.wk[ma]=new h(ma),qa.Nu=this.wk[ma],
qa.Nu.cancel=qa.cancel)}}else delete this.pi[ba],ca(Error('File not found: "'+ba+'"'),ba)};ha.prototype.T5=function(ba,ca,ea,ma,la){if(ba.length!==ca.stop-ca.start)la(Error("Part data is wrong size!"),ma);else{do{if(!this.wk[ea])return;ma=this.wk[ea].Bo;for(var ka=ca.nt.length,ra=0;ra<ka;++ra){var qa=ca.nt[ra];la(!1,qa.ht,ba["string"===typeof ba?"substring":"subarray"](qa.start,qa.stop),this.ie.G2(qa.ht));qa.ht in this.pi&&delete this.pi[qa.ht]}}while(ma!==this.wk[ea].Bo);delete this.wk[ea]}};ha.DISABLE_RANGE_HEADER=
!1;ha.HU=3;return ha}(wa.a);(function(aa){function ha(ba,ca,ea){var ma=aa.call(this)||this,la;for(la in ba)ma[la]=ba[la];ma.DFa=ba;ma.startOffset=ca;ma.endOffset=ea;ma.AZ=function(ka,ra,qa,ta){Object(na.isUndefined)(ra.stop)?(ra.start+=ma.endOffset,ra.stop=ma.endOffset):(ra.start+=ma.startOffset,ra.stop+=ma.startOffset);ka=ma.$y(ma.url,ra,ma.aF);return new ba.FB(ka,ra,qa,ta)};return ma}Object(pa.c)(ha,aa);return ha})(z);Object(n.a)(z);Object(n.b)(z);sa["default"]=z}}]);}).call(this || window)
